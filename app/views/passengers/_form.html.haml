= form_with model: @passenger, local: true do |form|
  .field
    %b Registration date:
    = @passenger.registration_date
  .field
    = form.label :permanent
    = form.check_box :permanent, disabled: !@current_user.admin?
  .field
    = form.label :name
    = form.text_field :name
  .field
    = form.label :spire
    = form.text_field :spire, placeholder: '12345678@umass.edu'
  .field
    = form.label :address
    = form.text_field :address
  .field
    = form.label :email
    = form.text_field :email
  .field
    = form.label :phone
    = form.phone_field :phone
  .field
    = form.label :status
    = form.select :status, Passenger::STATUSES, include_blank: true
  .field
    - unless @passenger.permanent?
      = form.label :registered_with_disability_services
      = form.check_box :registered_with_disability_services
  .field
    - unless @passenger.permanent?
      = form.label :has_brochure
      = form.check_box :has_brochure
  .field
    = form.label :mobility_device_id
    = form.select :mobility_device_id,
     options_from_collection_for_select(MobilityDevice.order(:name),
      :id, :name, @passenger.mobility_device&.id), include_blank: 'None'
  .field
    %b Registration Status
    = form.label :active_status_pending, 'Pending', class: 'form-check-label'
    = form.radio_button :active_status, 'pending', class: 'form-check-input'
    = form.label :active_status_active, 'Active', class: 'form-check-label'
    = form.radio_button :active_status, 'active', class: 'form-check-input'
    = form.label :active_status_archived, 'Archived', class: 'form-check-label'
    = form.radio_button :active_status, 'archived', class: 'form-check-input'
  .verification-fields{class: verification_fields_class}
    = form.fields_for :verification, @verification do |d|
      .form-group
        = d.label :verification_source_id,
          'Which agency verifies that this passenger needs rides?'
        = d.select :verification_source_id,
          options_from_collection_for_select(VerificationSource.all,
          :id, :name, @passenger.verification&.verification_source&.id),
          include_blank: true
      .form-group
        = d.label :expiration_date, 'How long will the passenger be with us?'
        = d.text_field :expiration_date,
          class: 'datepicker verification_expiration_date'
        - if @passenger.verification.blank? && @passenger.temporary?
          %i="Rides expire #{@passenger.rides_expire.try(:strftime, '%m/%d/%Y')}"
  .field
    = form.label :note
    = form.text_area :note, rows: 20, cols: 100
  .actions
    = form.submit 'Submit'
