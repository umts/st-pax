%h1 Dispatch Log

.row
  .col-md-6.offset-md-3
    = bootstrap_form_with model: @entry, local: true do |f|
      = f.text_area :text, required: true, rows: 8, hide_label: true
      .d-flex
        = f.primary 'Create log entry'
        .input-group.ml-2
          .input-group-text
            .custom-control.custom-checkbox
              = f.check_box_without_bootstrap :pinned, class: 'custom-control-input'
              = f.label :pinned, class: 'custom-control-label'
            

= will_paginate @entries, list_classes: %w[pagination justify-content-end]

%ul.dispatch-log
  - @entries.each do |entry|
    %li.card.mb-3.p-3{ class: entry.pinned ? 'pinned' : nil }
      .row
        .name.col-xl-1.font-weight-bold= entry.user.try(:name) || 'Unknown'
        .time.col-xl-2.font-italic= entry.entry_time
        .text.col-xl-8.my-3.my-xl-0.py-3.bg-light.rounded
          %p= entry.text
          - if @current_user.can_modify? entry
            .edit-form
              = bootstrap_form_with namespace: entry.id, model: entry, local: true do |f|
                = f.text_area :text, required: true, rows: 8, hide_label: true
                .d-flex
                  = f.primary 'Create log entry'
                  .input-group.ml-2
                    .input-group-text
                      .custom-control.custom-checkbox
                        = f.check_box_without_bootstrap :pinned, class: 'custom-control-input'
                        = f.label :pinned, class: 'custom-control-label'
        .actions.col-xl-1.form-inline
          - if @current_user.can_modify? entry
            = link_to 'Edit', '#', class: 'edit-entry mr-5'
            = button_to 'Delete', entry, method: :delete,
              class: 'btn btn-danger', form_class: 'ml-auto ml-xl-0'
